version: 2

models:
  - name: author__dim
    description: 'Table with dimensions information authors of github repositories'
    columns:
      - name: author_pk
        description: 'Primary key, the unique identifier of an author'
        data_tests:
          - unique
          - not_null
  - name: date__dim
    description: 'Dimension view which holds different date formats from 1970-2040'
    columns:
      - name: date_pk
        description: 'Primary key, unique identifier of a date (dd-mm-yy)'
        data_tests:
          - unique
          - not_null
  - name: license__dim
    description: 'Table with dimensions information licenses that can be used in github repositories'
    columns:
      - name: license_pk
        description: 'Primary key, the unique identifier of an license'
        data_tests:
          - unique
          - not_null
  - name: repo__dim
    description: 'Table with dimensions information about github repositories'
    columns:
      - name: repo_pk
        description: 'Primary key, the unique identifier of a repository'
        data_tests:
          - unique
          - not_null
  - name: repo__metric__fct
    description: 'Fact table which holds metrics about github repositories'
    columns:
      - name: repo_metric_pk
        description: 'Primary key, the unique identifier of a repository at a given time'
        data_tests:
          - unique
          - not_null
      - name: repo_fk
        description: 'Foreign key, joins to repo__dim table'
        data_tests:
          - not_null
          - relationships:
              arguments:
                to: ref('repo__dim')
                field: repo_pk
      - name: license_fk
        description: 'Foreign key, joins to license__dim table'
        data_tests:
          - not_null
          - relationships:
              arguments:
                to: ref('license__dim')
                field: license_pk
      - name: author_fk
        description: 'Foreign key, joins to author__dim table'
        data_tests:
          #- not_null # Only 5 repos are in the commit table so unable to associate an author to all repos when using sample tables
          - relationships:
              arguments:
                to: ref('author__dim')
                field: author_pk



